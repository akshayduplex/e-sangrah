<%- include('../../partials/header') %>

    <div class="page-wrapper">
        <div class="content">
            <!-- Breadcrumb -->
            <div class="dflexbtwn page-breadcrumb mb-3">
                <div class="my-auto mb-2">
                    <h2 class="mb-1">
                        <%= menu ? "Edit Menu" : "Add Menu" %>
                    </h2>
                    <nav>
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item">
                                <a href="#"><i class="ti ti-smart-home"></i></a>
                            </li>
                            <li class="breadcrumb-item">
                                <%= menu ? "Edit Menu" : "Add Menu" %>
                            </li>
                        </ol>
                    </nav>
                </div>
                <div class="listbtn">
                    <a href="/permissions/menu/list" class="site-btnmd fs-14">View List</a>
                </div>
            </div>
            <!-- /Breadcrumb -->

            <div class="card">
                <div class="card-body">
                    <div class="add-info-fieldset">
                        <form id="menuForm" data-url="<%= menu ? `/api/menu/${menu._id}` : '/api/menu' %>"
                            data-method="<%= menu ? 'PUT' : 'POST' %>">

                            <div class="modal-body">
                                <div class="row">
                                    <!-- Type -->
                                    <!-- Type -->
                                    <div class="col-md-4">
                                        <label for="type" class="form-label">Type</label>
                                        <select class="form-select select2" id="type" name="type" required>
                                            <option value="">-- Select Type --</option>
                                            <option value="Menu" <%=menu?.type==="Menu" ? "selected" : "" %>>Menu
                                            </option>
                                            <option value="SubMenu" <%=menu?.type==="SubMenu" ? "selected" : "" %>
                                                >SubMenu</option>
                                        </select>
                                    </div>

                                    <!-- Parent Menu -->
                                    <div class="col-md-4" id="masterField" style="display: none;">
                                        <label for="master_id" class="form-label">Parent Menu</label>
                                        <select class="form-select select2" id="master_id" name="master_id">
                                            <option value="">-- Select Parent Menu --</option>
                                            <% masters.forEach(master=> { %>
                                                <option value="<%= master._id %>" <%=menu?.master_id &&
                                                    menu.master_id.toString()===master._id.toString() ? "selected" : ""
                                                    %>>
                                                    <%= master.name %>
                                                </option>
                                                <% }) %>
                                        </select>
                                    </div>


                                    <!-- Name -->
                                    <div class="col-md-4">
                                        <label for="name" class="form-label">Name</label>
                                        <input type="text" class="form-control" id="name" name="name"
                                            placeholder="Enter Name" value="<%= menu?.name || "" %>" required>
                                    </div>
                                </div>

                                <!-- Icon, URL, Priority -->
                                <div class="row mb-4 pt-3">
                                    <div class="col-md-4">
                                        <label for="icon_code" class="form-label">Icon Code</label>
                                        <input type="text" class="form-control" id="icon_code" name="icon_code"
                                            placeholder="Enter Icon Code" value="<%= menu?.icon_code || '' %>">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="url" class="form-label">URL</label>
                                        <input type="text" class="form-control" id="url" name="url"
                                            placeholder="Enter URL" value="<%= menu?.url || '' %>">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="priority" class="form-label">Priority</label>
                                        <input type="number" class="form-control" id="priority" name="priority"
                                            placeholder="Enter Priority" value="<%= menu?.priority || 1 %>" required
                                            min="1">
                                    </div>
                                </div>

                                <!-- Is Show -->
                                <div class="row mb-4">
                                    <div class="col-md-12 d-flex align-items-center">
                                        <label class="form-label me-3 mb-0">Is Show?</label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="is_show"
                                                    id="is_show_yes" value="true" <%=menu?.is_show !==false ? "checked"
                                                    : "" %>>
                                                <label class="form-check-label" for="is_show_yes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="is_show"
                                                    id="is_show_no" value="false" <%=menu?.is_show===false ? "checked"
                                                    : "" %>>
                                                <label class="form-check-label" for="is_show_no">No</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!-- Buttons -->
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="/permissions/menu/list" class="btn btn-secondary me-2">Cancel</a>
                                    <button type="submit" class="btn btn-primary">
                                        <%= menu ? "Save Changes" : "Submit" %>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script src="/js/pages/permissions/add-edit-menu.js" defer></script>
    <%- include('../../partials/footer') %>